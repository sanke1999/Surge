# By: Steve
# X: @St7evechou
# æœ€åŽä¸€æ¬¡æ›´æ–°ï¼š2024.06.24
# TGé¢‘é“ï¼šhttps://t.me/st7evee
# ä¸‹è½½é…ç½®åŽ,è¯·æ‰‹åŠ¨æ·»åŠ æœºåœºè®¢é˜…
# ä¸‹è½½é“¾æŽ¥ï¼šhttps://raw.githubusercontent.com/zxfccmm4/Surge/main/Steve_SmartGroup.conf
# æ‰¾åˆ°"AllServer = select, policy-path=æ”¹æˆä½ çš„è®¢é˜…" æ›¿æ¢ä¸º è‡ªå·±çš„æœºåœºè®¢é˜…é“¾æŽ¥ 
# è¯·ä¿®æ”¹ [Proxy] ä»¥ä¸‹èŠ‚ç‚¹ä¸ºä½ çš„è‡ªå»ºèŠ‚ç‚¹

[General]
# --- GENERAL ---
# Enhanced Wi-Fi Assist
wifi-assist = true
# Hybrid Network
all-hybrid = false
# Gaming Optimization
udp-priority = true # å¼€å¯æ¸¸æˆä¼˜åŒ–ï¼Œå‡å°‘å»¶è¿Ÿ
# Latency Benchmark
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://1.1.1.1/generate_204
test-timeout = 5
# GeoIP Database
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
ipv6 = false
# --- Wi-Fi ACCESS ---
allow-wifi-access = false
# Surge iOS - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# Surge Mac - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
# å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = true
# --- REMOTE CONTROLLER ---
external-controller-access = steve@0.0.0.0:6160
# HTTP API & Web Dashboard
http-api = steve@0.0.0.0:6166
http-api-tls = true
http-api-web-dashboard = true
# --- COMPATIBILITY ---
compatibility-mode = 1 # å¢žåŠ å…¼å®¹æ€§ï¼Œç¡®ä¿é€‚é…æ›´å¤šåœºæ™¯
# è·³è¿‡ä»£ç†
skip-proxy = localhost, *.local, *.adguard.org, captive.apple.com, *.apple.com, *.local
exclude-simple-hostnames = true
# --- DNS ---
# The IP addresses of upstream DNS servers
read-etc-hosts = true
use-local-host-item-for-proxy = true
encrypted-dns-follow-outbound-mode = false
include-all-networks = false
# --- ROUTING ---
include-local-networks = false
loglevel = info # å‡å°‘æ—¥å¿—é‡ï¼Œé¿å…æ—¥å¿—è¿‡å¤šå½±å“æ€§èƒ½
# --- ADVANCED ---
show-error-page-for-reject = true
always-real-ip = *.nintendo.net, *.playstation.net, *.xboxlive.com
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
force-http-engine-hosts = *.ott.cibntv.net
use-default-policy-if-wifi-not-primary = false
udp-policy-not-supported-behaviour = DIRECT # ä¸æ”¯æŒ UDP æ—¶ï¼Œæ”¹ä¸ºç›´è¿žè€Œéžæ‹’ç»
ipv6-vif = auto
dns-server = 223.5.5.5, 223.6.6.6, system

[Proxy]
# è¯·è‡ªè¡Œæ·»åŠ ä»£ç†èŠ‚ç‚¹

[Proxy Group]
NoAuto = select, Mainland, Automatic
Automatic = select, Hong Kong, Taiwan, Japan, Singapore, United States, Korea, United Kingdom
AllServer = select, policy-path=æ”¹æˆä½ çš„è®¢é˜…, update-interval=0
Apple = select, Mainland, Hong Kong, United States
Bilibili = select, Mainland, Hong Kong, Taiwan
Disney+ = select, Hong Kong, Singapore
Netflix = select, Hong Kong, Taiwan, Singapore, Japan, United States
Speedtest = select, Mainland, Automatic, AllServer
Telegram = select, Automatic, Singapore, United States, Hong Kong, Taiwan, Japan
TikTok = select, Taiwan, Singapore, Japan, United States
Twitter = select, Automatic, Hong Kong, Taiwan, Singapore, Japan, United States
YouTube = select, Automatic, Hong Kong, Taiwan, Singapore, Japan, United States
AI = select, United States, Japan, Singapore
Microsoft = select, Mainland, Hong Kong, Singapore, United States
OneDrive = select, Mainland, Hong Kong, Singapore, United States
WeChat = select, Mainland, Hong Kong, Singapore, United States
Hong Kong = smart, policy-regex-filter=æ¸¯|ðŸ‡­ðŸ‡°|é¦™æ¸¯|HK|Hong
Taiwan = smart, policy-regex-filter=å°|ðŸ‡¨ðŸ‡³|å°æ¹¾|TW|Tai
Japan = smart, policy-regex-filter=æ—¥|ðŸ‡¯ðŸ‡µ|æ—¥æœ¬|JP|Japan
Singapore = smart, policy-regex-filter=å¡|ðŸ‡¸ðŸ‡¬|æ–°åŠ å¡|ç‹®åŸŽ|SG|Singapore
United States = smart, policy-regex-filter=ç¾Ž|ðŸ‡ºðŸ‡¸|ç¾Žå›½|US|States|American
United Kingdom = smart, policy-regex-filter=ðŸ‡¬ðŸ‡§|è‹±å›½|è‹±|è‹±æ ¼å…°|UK|United Kingdom
Korea = smart, policy-regex-filter=éŸ©|éŸ©å›½|Korea|KR|ðŸ‡°ðŸ‡·
Mainland = select, DIRECT
Proxy = select, Automatic, Hong Kong, Taiwan, Singapore, Japan, United States, United Kingdom

[Rule]
# ä¼˜åŒ–äº†ä¸€äº›è§„åˆ™çš„é¡ºåºä»¥æé«˜åŒ¹é…æ•ˆçŽ‡
# > æµ·å¤–çœ‹
DOMAIN-SUFFIX,haiwaikan.com,Automatic
# > SUFFIX
DOMAIN-SUFFIX,nssurge.com,Automatic
# > DOMAIN
DOMAIN,jable.tv,Automatic
DOMAIN,api.amplitude.com,Automatic
DOMAIN,api.revenuecat.com,REJECT
DOMAIN,m.cmx.im,Automatic
# > Adblock4limbo
RULE-SET,https://limbopro.com/Adblock4limbo_surge.list,REJECT
# > ChinaDNS
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaDNS/ChinaDNS.list,DIRECT
# > China
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMax/ChinaMax.list,DIRECT
# > Github
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,Automatic
# > æµåª’ä½“ç›¸å…³è§„åˆ™
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream.conf,Automatic
# > å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/zxfccmm4/Profiles/main/Surge/Ruleset/Global.list,Automatic
# > å±€åŸŸç½‘
RULE-SET,LAN,DIRECT
# > ASN China åˆ†æµ
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list,DIRECT
# > PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,United States
# > å…œåº•è§„åˆ™
FINAL,NoAuto,dns-failed

[Host]
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alipay.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
# åªä¿ç•™äº†å¸¸ç”¨åŸŸåçš„ Host è®¾ç½®ï¼Œå‡å°‘ä¸å¿…è¦çš„é¡¹

[URL Rewrite]
# > é‡å®šå‘ Google æœåŠ¡åˆ°å›½é™…ç‰ˆ
^https?:\/\/(www\.)?(g|google)\.cn https://www.google.com 302
# > é‡å®šå‘ HTTP åˆ° HTTPS
^https?:\/\/(www\.)?taobao\.com\/ https://taobao.com/ 302

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = *.google.cn, *.abema.io, *.zhihu.com

[Script]
# > Flush DNS
flushDNS = script-name=flushDNS,update-interval=-1
